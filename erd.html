<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; margin: 0; }
        .container { display: flex; flex: 1; overflow: hidden; }
        #editor { width: 40%; padding: 20px; background: #1e1e1e; color: #d4d4d4; font-family: monospace; border: none; outline: none; }
        #preview { width: 60%; padding: 20px; display: flex; justify-content: center; align-items: flex-start; overflow: auto; background: #f9f9f9; }
        .header { background: #333; color: white; padding: 10px 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h2>Data Model Planner (Live ERD)</h2>
        <p>Type your table definitions below using Mermaid syntax.</p>
    </div>
    <div class="container">
        <textarea id="editor" oninput="updateDiagram()">
erDiagram
    CUSTOMER ||--o{ ORDER : places
    ORDER ||--|{ LINE-ITEM : contains
    CUSTOMER {
        string name
        string email
        string customer_id PK
    }
    ORDER {
        int order_number PK
        string delivery_address
    }
        </textarea>
        <div id="preview">
            <pre class="mermaid" id="mermaid-container"></pre>
        </div>
    </div>

    <script>
        mermaid.initialize({ startOnLoad: true });

        function updateDiagram() {
            const input = document.getElementById('editor').value;
            const output = document.getElementById('mermaid-container');
            
            // Clean the output and re-render
            output.removeAttribute('data-processed');
            output.innerHTML = input;
            
            mermaid.contentLoaded();
        }
    </script>
</body>
</html>